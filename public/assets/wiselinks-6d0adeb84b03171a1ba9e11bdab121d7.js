"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var r,n,a,o,i,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,r=0;o>r;r+=1)i[r]=str(r,u)||"null";return a=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+s+"]":"["+i.join(",")+"]",gap=s,a}if(rep&&"object"==typeof rep)for(o=rep.length,r=0;o>r;r+=1)"string"==typeof rep[r]&&(n=rep[r],a=str(n,u),a&&i.push(quote(n)+(gap?": ":":")+a));else for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(a=str(n,u),a&&i.push(quote(n)+(gap?": ":":")+a));return a=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+s+"}":"{"+i.join(",")+"}",gap=s,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var r,n,a=t[e];if(a&&"object"==typeof a)for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n=walk(a,r),void 0!==n?a[r]=n:delete a[r]);return reviver.call(t,e,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){"use strict";var r=t.History=t.History||{};if("undefined"!=typeof r.Adapter)throw new Error("History.js Adapter has already been loaded...");r.Adapter={handlers:{},_uid:1,uid:function(t){return t._uid||(t._uid=r.Adapter._uid++)},bind:function(t,e,n){var a=r.Adapter.uid(t);r.Adapter.handlers[a]=r.Adapter.handlers[a]||{},r.Adapter.handlers[a][e]=r.Adapter.handlers[a][e]||[],r.Adapter.handlers[a][e].push(n),t["on"+e]=function(t,e){return function(n){r.Adapter.trigger(t,e,n)}}(t,e)},trigger:function(t,e,n){n=n||{};var a,o,i=r.Adapter.uid(t);for(r.Adapter.handlers[i]=r.Adapter.handlers[i]||{},r.Adapter.handlers[i][e]=r.Adapter.handlers[i][e]||[],a=0,o=r.Adapter.handlers[i][e].length;o>a;++a)r.Adapter.handlers[i][e][a].apply(this,[n])},extractEventData:function(t,r){var n=r&&r[t]||e;return n},onDomLoad:function(e){var r=t.setTimeout(function(){e()},2e3);t.onload=function(){clearTimeout(r),e()}}},"undefined"!=typeof r.init&&r.init()}(window),function(t){"use strict";var e=t.document,r=t.setTimeout||r,n=t.clearTimeout||n,a=t.setInterval||a,o=t.History=t.History||{};if("undefined"!=typeof o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){return"undefined"!=typeof o.initHtml4.initialized?!1:(o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(t){var e,r=o.getHashByIndex();return e=t===r},o.isHashEqual=function(t,e){return t=encodeURIComponent(t).replace(/%25/g,"%"),e=encodeURIComponent(e).replace(/%25/g,"%"),t===e},o.saveHash=function(t){return o.isLastHash(t)?!1:(o.savedHashes.push(t),!0)},o.getHashByIndex=function(t){var e=null;return e="undefined"==typeof t?o.savedHashes[o.savedHashes.length-1]:0>t?o.savedHashes[o.savedHashes.length+t]:o.savedHashes[t]},o.discardedHashes={},o.discardedStates={},o.discardState=function(t,e,r){var n,a=o.getHashByState(t);return n={discardedState:t,backState:r,forwardState:e},o.discardedStates[a]=n,!0},o.discardHash=function(t,e,r){var n={discardedHash:t,backState:r,forwardState:e};return o.discardedHashes[t]=n,!0},o.discardedState=function(t){var e,r=o.getHashByState(t);return e=o.discardedStates[r]||!1},o.discardedHash=function(t){var e=o.discardedHashes[t]||!1;return e},o.recycleState=function(t){var e=o.getHashByState(t);return o.discardedState(t)&&delete o.discardedStates[e],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var r,n,i,s,u="",l=Boolean(o.getHash());return o.isInternetExplorer()?(r="historyjs-iframe",n=e.createElement("iframe"),n.setAttribute("id",r),n.setAttribute("src","#"),n.style.display="none",e.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),i="",s=!1,o.checkerFunction=function(){if(s)return!1;s=!0;var e=o.getHash(),r=o.getHash(n.contentWindow.document);return e!==u?(u=e,r!==e&&(i=r=e,n.contentWindow.document.open(),n.contentWindow.document.close(),n.contentWindow.document.location.hash=o.escapeHash(e)),o.Adapter.trigger(t,"hashchange")):r!==i&&(i=r,l&&""===r?o.back():o.setHash(r,!1)),s=!1,!0}):o.checkerFunction=function(){var e=o.getHash()||"";return e!==u&&(u=e,o.Adapter.trigger(t,"hashchange")),!0},o.intervalList.push(a(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(e){var r,n=e&&e.newURL||o.getLocationHref(),a=o.getHashByUrl(n),i=null,s=null;return o.isLastHash(a)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(a),a&&o.isTraditionalAnchor(a)?(o.Adapter.trigger(t,"anchorchange"),o.busy(!1),!1):(i=o.extractState(o.getFullUrl(a||o.getLocationHref()),!0),o.isLastSavedState(i)?(o.busy(!1),!1):(s=o.getHashByState(i),(r=o.discardedState(i))?(o.getHashByIndex(-2)===o.getHashByState(r.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},o.Adapter.bind(t,"hashchange",o.onHashChange),o.pushState=function(e,r,n,a){if(n=encodeURI(n).replace(/%25/g,"%"),o.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(a!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:a}),!1;o.busy(!0);var i=o.createStateObject(e,r,n),s=o.getHashByState(i),u=o.getState(!1),l=o.getHashByState(u),d=o.getHash(),c=o.expectedStateId==i.id;return o.storeState(i),o.expectedStateId=i.id,o.recycleState(i),o.setTitle(i),s===l?(o.busy(!1),!1):(o.saveState(i),c||o.Adapter.trigger(t,"statechange"),o.isHashEqual(s,d)||o.isHashEqual(s,o.getShortUrl(o.getLocationHref()))||o.setHash(s,!1),o.busy(!1),!0)},o.replaceState=function(e,r,n,a){if(n=encodeURI(n).replace(/%25/g,"%"),o.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(a!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:a}),!1;o.busy(!0);var i=o.createStateObject(e,r,n),s=o.getHashByState(i),u=o.getState(!1),l=o.getHashByState(u),d=o.getStateByIndex(-2);return o.discardState(u,i,d),s===l?(o.storeState(i),o.expectedStateId=i.id,o.recycleState(i),o.setTitle(i),o.saveState(i),o.Adapter.trigger(t,"statechange"),o.busy(!1)):o.pushState(i.data,i.title,i.url,!1),!0}),void(o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(t,"hashchange")})))},"undefined"!=typeof o.init&&o.init()}(window),function(t,e){"use strict";var r=t.console||e,n=t.document,a=t.navigator,o=t.sessionStorage||!1,i=t.setTimeout,s=t.clearTimeout,u=t.setInterval,l=t.clearInterval,d=t.JSON,c=t.alert,p=t.History=t.History||{},h=t.history;try{o.setItem("TEST","1"),o.removeItem("TEST")}catch(f){o=!1}if(d.stringify=d.stringify||d.encode,d.parse=d.parse||d.decode,"undefined"!=typeof p.init)throw new Error("History.js Core has already been loaded...");p.init=function(){return"undefined"==typeof p.Adapter?!1:("undefined"!=typeof p.initCore&&p.initCore(),"undefined"!=typeof p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(){if("undefined"!=typeof p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||n.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var t,e=p.intervalList;if("undefined"!=typeof e&&null!==e){for(t=0;t<e.length;t++)l(e[t]);p.intervalList=null}},p.debug=function(){p.options.debug&&p.log.apply(p,arguments)},p.log=function(){var t,e,a,o,i,s=!("undefined"==typeof r||"undefined"==typeof r.log||"undefined"==typeof r.log.apply),u=n.getElementById("log");for(s?(o=Array.prototype.slice.call(arguments),t=o.shift(),"undefined"!=typeof r.debug?r.debug.apply(r,[t,o]):r.log.apply(r,[t,o])):t="\n"+arguments[0]+"\n",e=1,a=arguments.length;a>e;++e){if(i=arguments[e],"object"==typeof i&&"undefined"!=typeof d)try{i=d.stringify(i)}catch(l){}t+="\n"+i+"\n"}return u?(u.value+=t+"\n-----\n",u.scrollTop=u.scrollHeight-u.clientHeight):s||c(t),!0},p.getInternetExplorerMajorVersion=function(){var t=p.getInternetExplorerMajorVersion.cached="undefined"!=typeof p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=n.createElement("div"),r=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&r[0];);return t>4?t:!1}();return t},p.isInternetExplorer=function(){var t=p.isInternetExplorer.cached="undefined"!=typeof p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());return t},p.emulated=p.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(a.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(a.userAgent))),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in n)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},p.cloneObject=function(t){var e,r;return t?(e=d.stringify(t),r=d.parse(e)):r={},r},p.getRootUrl=function(){var t=n.location.protocol+"//"+(n.location.hostname||n.location.host);return n.location.port&&(t+=":"+n.location.port),t+="/"},p.getBaseHref=function(){var t=n.getElementsByTagName("base"),e=null,r="";return 1===t.length&&(e=t[0],r=e.href.replace(/[^\/]+$/,"")),r=r.replace(/\/+$/,""),r&&(r+="/"),r},p.getBaseUrl=function(){var t=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return t},p.getPageUrl=function(){var t,e=p.getState(!1,!1),r=(e||{}).url||p.getLocationHref();return t=r.replace(/\/+$/,"").replace(/[^\/]+$/,function(t){return/\./.test(t)?t:t+"/"})},p.getBasePageUrl=function(){var t=p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/";return t},p.getFullUrl=function(t,e){var r=t,n=t.substring(0,1);return e="undefined"==typeof e?!0:e,/[a-z]+\:\/\//.test(t)||(r="/"===n?p.getRootUrl()+t.replace(/^\/+/,""):"#"===n?p.getPageUrl().replace(/#.*/,"")+t:"?"===n?p.getPageUrl().replace(/[\?#].*/,"")+t:e?p.getBaseUrl()+t.replace(/^(\.\/)+/,""):p.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),r.replace(/\#$/,"")},p.getShortUrl=function(t){var e=t,r=p.getBaseUrl(),n=p.getRootUrl();return p.emulated.pushState&&(e=e.replace(r,"")),e=e.replace(n,"/"),e="./"+e,e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(t){return t=t||n,t.URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:-1==t.URL.indexOf("#")&&-1!=t.location.href.indexOf("#")?t.location.href:t.URL||t.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0);var r=p.getLastSavedState();return!r&&e&&(r=p.createStateObject()),t&&(r=p.cloneObject(r),r.url=r.cleanUrl||r.url),r},p.getIdByState=function(t){var e,r=p.extractId(t.url);if(!r)if(e=p.getStateString(t),"undefined"!=typeof p.stateToId[e])r=p.stateToId[e];else if("undefined"!=typeof p.store.stateToId[e])r=p.store.stateToId[e];else{for(;;)if(r=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof p.idToState[r]&&"undefined"==typeof p.store.idToState[r])break;p.stateToId[e]=r,p.idToState[r]=t}return r},p.normalizeState=function(t){var e,r;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),e={},e.normalized=!0,e.title=t.title||"",e.url=p.getFullUrl(t.url?t.url:p.getLocationHref()),e.hash=p.getShortUrl(e.url),e.data=p.cloneObject(t.data),e.id=p.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,r=!p.isEmptyObject(e.data),(e.title||r)&&p.options.disableSuid!==!0&&(e.hash=p.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=p.getFullUrl(e.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},p.createStateObject=function(t,e,r){var n={data:t,title:e,url:r};return n=p.normalizeState(n)},p.getStateById=function(t){t=String(t);var r=p.idToState[t]||p.store.idToState[t]||e;return r},p.getStateString=function(t){var e,r,n;return e=p.normalizeState(t),r={data:e.data,title:t.title,url:t.url},n=d.stringify(r)},p.getStateId=function(t){var e,r;return e=p.normalizeState(t),r=e.id},p.getHashByState=function(t){var e,r;return e=p.normalizeState(t),r=e.hash},p.extractId=function(t){var e,r,n,a;return a=-1!=t.indexOf("#")?t.split("#")[0]:t,r=/(.*)\&_suid=([0-9]+)$/.exec(a),n=r?r[1]||t:t,e=r?String(r[2]||""):"",e||!1},p.isTraditionalAnchor=function(t){var e=!/[\/\\.]/.test(t);return e},p.extractState=function(t,e){var r,n,a=null;return e=e||!1,r=p.extractId(t),r&&(a=p.getStateById(r)),a||(n=p.getFullUrl(t),r=p.getIdByUrl(n)||!1,r&&(a=p.getStateById(r)),a||!e||p.isTraditionalAnchor(t)||(a=p.createStateObject(null,null,n))),a},p.getIdByUrl=function(t){var r=p.urlToId[t]||p.store.urlToId[t]||e;return r},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||e},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||e},p.hasUrlDuplicate=function(t){var e,r=!1;return e=p.extractState(t.url),r=e&&e.id!==t.id},p.storeState=function(t){return p.urlToId[t.url]=t.id,p.storedStates.push(p.cloneObject(t)),t},p.isLastSavedState=function(t){var e,r,n,a=!1;return p.savedStates.length&&(e=t.id,r=p.getLastSavedState(),n=r.id,a=e===n),a},p.saveState=function(t){return p.isLastSavedState(t)?!1:(p.savedStates.push(p.cloneObject(t)),!0)},p.getStateByIndex=function(t){var e=null;return e="undefined"==typeof t?p.savedStates[p.savedStates.length-1]:0>t?p.savedStates[p.savedStates.length+t]:p.savedStates[t]},p.getCurrentIndex=function(){var t=null;return t=p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(t){var e,r=p.getLocationHref(t);return e=p.getHashByUrl(r)},p.unescapeHash=function(t){var e=p.normalizeHash(t);return e=decodeURIComponent(e)},p.normalizeHash=function(t){var e=t.replace(/[^#]*#/,"").replace(/#.*/,"");return e},p.setHash=function(t,e){var r,a;return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:e}),!1):(p.busy(!0),r=p.extractState(t,!0),r&&!p.emulated.pushState?p.pushState(r.data,r.title,r.url,!1):p.getHash()!==t&&(p.bugs.setHash?(a=p.getPageUrl(),p.pushState(null,null,a+"#"+t,!1)):n.location.hash=t),p)},p.escapeHash=function(e){var r=p.normalizeHash(e);return r=t.encodeURIComponent(r),p.bugs.hashEscape||(r=r.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),r},p.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=p.unescapeHash(e)},p.setTitle=function(t){var e,r=t.title;r||(e=p.getStateByIndex(0),e&&e.url===t.url&&(r=e.title||p.options.initialTitle));try{n.getElementsByTagName("title")[0].innerHTML=r.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(a){}return n.title=r,p},p.queues=[],p.busy=function(t){if("undefined"!=typeof t?p.busy.flag=t:"undefined"==typeof p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){s(p.busy.timeout);var e=function(){var t,r,n;if(!p.busy.flag)for(t=p.queues.length-1;t>=0;--t)r=p.queues[t],0!==r.length&&(n=r.shift(),p.fireQueueItem(n),p.busy.timeout=i(e,p.options.busyDelay))};p.busy.timeout=i(e,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(t){return t.callback.apply(t.scope||p,t.args||[])},p.pushQueue=function(t){return p.queues[t.queue||0]=p.queues[t.queue||0]||[],p.queues[t.queue||0].push(t),p},p.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),"undefined"!=typeof e&&(t.queue=e),p.busy()?p.pushQueue(t):p.fireQueueItem(t),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(s(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(t){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=i(function(){return p.doubleCheckClear(),p.stateChanged||t(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var e,r=p.extractState(p.getLocationHref());if(!p.isLastSavedState(r))return e=r,e||(e=p.createStateObject()),p.Adapter.trigger(t,"popstate"),p},p.back=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),h.go(-1),!0)},p.forward=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),h.go(1),!0)},p.go=function(t,e){var r;if(t>0)for(r=1;t>=r;++r)p.forward(e);else{if(!(0>t))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(r=-1;r>=t;--r)p.back(e)}return p},p.emulated.pushState){var f=function(){};p.pushState=p.pushState||f,p.replaceState=p.replaceState||f}else p.onPopState=function(e,r){var n,a,o=!1,i=!1;return p.doubleCheckComplete(),(n=p.getHash())?(a=p.extractState(n||p.getLocationHref(),!0),a?p.replaceState(a.data,a.title,a.url,!1):(p.Adapter.trigger(t,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(o=p.Adapter.extractEventData("state",e,r)||!1,i=o?p.getStateById(o):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()),i||(i=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(i)?(p.busy(!1),!1):(p.storeState(i),p.saveState(i),p.setTitle(i),p.Adapter.trigger(t,"statechange"),p.busy(!1),!0))},p.Adapter.bind(t,"popstate",p.onPopState),p.pushState=function(e,r,n,a){if(p.getHashByUrl(n)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(a!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:a}),!1;p.busy(!0);var o=p.createStateObject(e,r,n);return p.isLastSavedState(o)?p.busy(!1):(p.storeState(o),p.expectedStateId=o.id,h.pushState(o.id,o.title,o.url),p.Adapter.trigger(t,"popstate")),!0},p.replaceState=function(e,r,n,a){if(p.getHashByUrl(n)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(a!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:a}),!1;p.busy(!0);var o=p.createStateObject(e,r,n);return p.isLastSavedState(o)?p.busy(!1):(p.storeState(o),p.expectedStateId=o.id,h.replaceState(o.id,o.title,o.url),p.Adapter.trigger(t,"popstate")),!0};if(o){try{p.store=d.parse(o.getItem("History.store"))||{}}catch(g){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(t,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),o&&(p.onUnload=function(){var t,e,r;try{t=d.parse(o.getItem("History.store"))||{}}catch(n){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in p.idToState)p.idToState.hasOwnProperty(e)&&(t.idToState[e]=p.idToState[e]);for(e in p.urlToId)p.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=p.urlToId[e]);for(e in p.stateToId)p.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=p.stateToId[e]);p.store=t,p.normalizeStore(),r=d.stringify(t);try{o.setItem("History.store",r)}catch(a){if(a.code!==DOMException.QUOTA_EXCEEDED_ERR)throw a;o.length&&(o.removeItem("History.store"),o.setItem("History.store",r))}},p.intervalList.push(u(p.onUnload,p.options.storeInterval)),p.Adapter.bind(t,"beforeunload",p.onUnload),p.Adapter.bind(t,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(u(p.safariStatePoll,p.options.safariPollInterval)),("Apple Computer, Inc."===a.vendor||"Mozilla"===(a.appCodeName||""))&&(p.Adapter.bind(t,"hashchange",function(){p.Adapter.trigger(t,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(t,"hashchange")})))},p.options&&p.options.delayInit||p.init()}(window),function(){var t;t=function(){function t(){}return t.prototype.parse=function(t){return this._get_parser()(t)},t.prototype._get_parser=function(){return null!=this._document_parser?this._document_parser:this._document_parser=this._parser_factory()},t.prototype._parser_factory=function(){var e,r,n,a,o,i;r=function(e){return(new t).parseFromString(e,"text/html")},e=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.documentElement.innerHTML=t,e},n=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.open("replace"),e.write(t),e.close(),e};try{if(window.DOMParser)return o=r("<html><body><p>test"),r}catch(s){return a=s,o=e("<html><body><p>test"),e}finally{if(1!==(null!=o&&null!=(i=o.body)?i.childNodes.length:void 0))return n}},t}(),null==window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.DOMParser=t}.call(this),function(){var t;t=function(){function t(t,e,r){this.html=t,this.xhr=e,this.$target=r}return t._document_parser=null,t._get_document_parser=function(){return null!=t._document_parser?t._document_parser:t._document_parser=new window._Wiselinks.DOMParser},t.prototype.url=function(){return this.xhr.getResponseHeader("X-Wiselinks-Url")},t.prototype.assets_digest=function(){return this._is_full_document_response()?$('meta[name="assets-digest"]',this._get_doc()).attr("content"):this.xhr.getResponseHeader("X-Wiselinks-Assets-Digest")},t.prototype.content=function(){return null!=this._content?this._content:this._content=this._extract_content()},t.prototype.title=function(){return null!=this._title?this._title:this._title=this._extract_title()},t.prototype._extract_title=function(){return this._is_full_document_response()?$("title",this._get_doc()).text():this.xhr.getResponseHeader("X-Wiselinks-Title")},t.prototype.description=function(){return null!=this._description?this._description:this._description=this._extract_description()},t.prototype._extract_description=function(){return this._is_full_document_response()?$('meta[name="description"]',this._get_doc()).text():this.xhr.getResponseHeader("X-Wiselinks-Description")},t.prototype._extract_content=function(){return this._is_full_document_response()?this._get_doc_target_node().html():this.html},t.prototype._is_full_document_response=function(){return 1===this._get_doc_target_node().length},t.prototype._get_doc_target_node=function(){return null!=this.$doc_target_node?this.$doc_target_node:this.$doc_target_node=$(this.$target.selector,this._get_doc())},t.prototype._get_doc=function(){return null!=this._doc?this._doc:this._doc=t._get_document_parser().parse(this.html)},t}(),null==window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Response=t}.call(this),function(){var t;t=function(){function t(t){this.options=null!=t?t:{}}return t.prototype.call=function(t,e){var r;return r=this,null!=this.redirected?void(this.redirected=null):(r._loading(t,e),$.ajax({url:e.url,headers:{"X-Wiselinks":e.data.render,"X-Wiselinks-Referer":e.data.referer},dataType:"html"}).done(function(e,n,a){return r._html_loaded(t,e,n,a)}).fail(function(n,a,o){return r._fail(t,a,e,o,n.status)}).always(function(n,a){return r._always(t,a,e)}))},t.prototype._normalize=function(t){return null!=t?t=t.replace(/\/+$/,""):void 0},t.prototype._assets_changed=function(t){return null!=this.options.assets_digest&&this.options.assets_digest!==t},t.prototype._redirect_to=function(t,e,r,n){return n&&n.readyState<4&&(n.onreadystatechange=$.noop,n.abort()),this.redirected=!0,$(document).trigger("page:redirected",[e,r.data.render,t]),History.replaceState(r.data,document.title,t)},t.prototype._loading=function(t,e){return $(document).trigger("page:loading",[t,e.data.render,decodeURI(e.url)])},t.prototype._done=function(t,e,r,n){return $(document).trigger("page:done",[t,e,decodeURI(r.url),n])},t.prototype._html_loaded=function(t,e,r,n){var a,o,i,s;return o=new window._Wiselinks.Response(e,n,t),s=this._normalize(o.url()),a=o.assets_digest(),this._assets_changed(a)?window.location.reload(!0):(i=History.getState(),null!=s&&s!==this._normalize(i.url)&&this._redirect_to(s,t,i,n),t.html(o.content()).promise().done(function(e){return function(){return e._title(o.title()),e._description(o.description()),e._done(t,r,i,o.content())}}(this)))},t.prototype._fail=function(t,e,r,n,a){return $(document).trigger("page:fail",[t,e,decodeURI(r.url),n,a])},t.prototype._always=function(t,e,r){return $(document).trigger("page:always",[t,e,decodeURI(r.url)])},t.prototype._title=function(t){return null!=t?($(document).trigger("page:title",decodeURI(t)),document.title=decodeURI(t)):void 0},t.prototype._description=function(t){return null!=t?($(document).trigger("page:description",decodeURI(t)),$('meta[name="description"]').attr("content",decodeURI(t))):void 0},t}(),void 0===window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.RequestManager=t}.call(this),function(){var t;t=function(){function t(t,e){var r;this.$target=t,this.options=e,r=this,this.template_id=(new Date).getTime(),this.request_manager=new _Wiselinks.RequestManager(this.options),this.$target=r._wrap(this.$target),r._try_target(this.$target),History.emulated.pushState&&this.options.html4===!0&&-1===window.location.href.indexOf("#.")&&this.options.html4_normalize_path===!0&&window.location.pathname!==this.options.html4_root_path&&(window.location.href=""+window.location.protocol+"//"+window.location.host+this.options.html4_root_path+"#."+window.location.pathname),History.Adapter.bind(window,"statechange",function(){var t;return t=History.getState(),r._call(r._template_id_changed(t)?r._reset_state(t):t)}),$(document).on("click","a[data-push], a[data-replace]",function(t){var e;return(e=new _Wiselinks.Link(r,$(this))).allows_process(t)?(t.preventDefault(),e.process(),!1):void 0}),$(document).on("submit","form[data-push], form[data-replace]",function(t){var e;return(e=new _Wiselinks.Form(r,$(this)))?(t.preventDefault(),e.process(),!1):void 0})}return t.prototype.load=function(t,e,r){var n,a;return null==r&&(r="template"),"partial"!==r&&(this.template_id=(new Date).getTime()),a=null!=e?(n=this._wrap(e),this._try_target(n),n.selector):void 0,History.pushState({timestamp:(new Date).getTime(),template_id:this.template_id,render:r,target:a,referer:window.location.href},document.title,t)},t.prototype.reload=function(){return History.replaceState({timestamp:(new Date).getTime(),template_id:this.template_id,render:"template",referer:window.location.href},document.title,History.getState().url)},t.prototype._call=function(t){var e;return e=null!=t.data.target?$(t.data.target):this.$target,this.request_manager.call(e,t)},t.prototype._template_id_changed=function(t){return null==t.data.template_id||t.data.template_id!==this.template_id},t.prototype._make_state=function(t,e,r,n){return null==r&&(r="template"),{url:t,data:{target:e,render:r,referer:n}}},t.prototype._reset_state=function(t){return null==t.data&&(t.data={}),t.data.target=null,t.data.render="template",t},t.prototype._try_target=function(t){if(0===t.length&&"exception"===this.options.target_missing)throw new Error("[Wiselinks] Target missing: `"+t.selector+"`")},t.prototype._wrap=function(t){return $(t)},t}(),void 0===window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Page=t}.call(this),function(){var t;t=function(){function t(t,e){this.page=t,this.$link=e}return t.prototype.allows_process=function(t){return!(this._cross_origin_link(t.currentTarget)||this._non_standard_click(t))},t.prototype.process=function(){var t;return t="partial"===this.$link.data("push")?"partial":"template",this.page.load(this.$link.attr("href"),this.$link.data("target"),t)},t.prototype._cross_origin_link=function(t){return this._different_protocol(t)||this._different_host(t)||this._different_port(t)},t.prototype._different_protocol=function(t){return":"===t.protocol||""===t.protocol?!1:location.protocol!==t.protocol},t.prototype._different_host=function(t){return""===t.host?!1:location.host.split(":")[0]!==t.host.split(":")[0]},t.prototype._different_port=function(t){var e;return e=location.port===t.port||""===location.port&&("80"===t.port||"443"===t.port),!e},t.prototype._non_standard_click=function(t){return t.metaKey||t.ctrlKey||t.shiftKey||t.altKey},t}(),void 0===window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Link=t}.call(this),function(){var t;t=function(){function t(t,e){this.page=t,this.$form=e}return t.prototype.process=function(){var t;return t=this,t._include_blank_url_params()?t.page.load(t._url(),t._target(),t._type()):t._without_blank_url_params(function(){return t.page.load(t._url(),t._target(),t._type())})},t.prototype._without_blank_url_params=function(t){var e,r;return r="select:not(:disabled),input:not(:disabled)",e=this.$form.find(r).filter(function(){return!$(this).val()}),e.attr("disabled",!0),t(),e.attr("disabled",!1)},t.prototype._params=function(){var t,e,r,n,a,o;for(t={},o=this.$form.serializeArray(),n=0,a=o.length;a>n;n++)e=o[n],"utf8"!==e.name&&(r=-1!==e.name.indexOf("[]",e.name.length-"[]".length)?e.name.substr(0,e.name.length-2):e.name,t[r]=null!=t[r]?t[r]+(","+e.value):e.value);return t},t.prototype._include_blank_url_params=function(){return this.$form.data("include-blank-url-params")===!0},t.prototype._optimize_url_params=function(){return this.$form.data("optimize-url-params")!==!1},t.prototype._type=function(){return"partial"===this.$form.data("push")?"partial":"template"},t.prototype._target=function(){return this.$form.data("target")},t.prototype._url=function(){var t,e,r,n,a,o;
return r=this,n=function(){var n;if(r._optimize_url_params()){e=[],n=this._params();for(t in n)o=n[t],e.push(""+t+"="+encodeURIComponent(o).replace(/%2C/g,","));return e.join("&")}return this.$form.serialize()}.call(this),a=this.$form.attr("action").replace(/\?.*$/,""),n.length>0&&(a+="?"+n),a},t}(),null==window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Form=t}.call(this),function(){var t;t=function(){function t(t,e){null==t&&(t=$("body")),this.options=null!=e?e:{},this._try_jquery(),this.options=$.extend(this._defaults(),this.options),this.enabled()&&(this.options.disable_suid&&(History.options.disableSuid=!0),this.page=new _Wiselinks.Page(t,this.options))}return t.prototype.enabled=function(){return!History.emulated.pushState||this.options.html4===!0},t.prototype.load=function(t,e,r){return null==r&&(r="template"),this.page.load(t,e,r)},t.prototype.reload=function(){return this.page.reload()},t.prototype._defaults=function(){return{disable_suid:!0,html4:!0,html4_root_path:"/",html4_normalize_path:!0,target_missing:null,assets_digest:$("meta[name='assets-digest']").attr("content")}},t.prototype._try_jquery=function(){if(null==window.jQuery)throw new Error("[Wiselinks] jQuery is not loaded")},t}(),window.Wiselinks=t}.call(this);