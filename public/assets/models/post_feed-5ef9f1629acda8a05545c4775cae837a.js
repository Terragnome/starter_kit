var PostFeed=PostFeed||{};PostFeed.Init=function(){PostFeed.isLoading=!1,PostFeed._feed=$("#post_feed"),PostFeed._loader=$("#post_feed_loader")},PostFeed.OnScroll=function(){var e=PostFeed._feed;if(!(e.length<=0)){e=e.first();var o=DOM._window.scrollTop(),t=DOM._document.height()-DOM._window.outerHeight();if(!PostFeed.isLoading&&e.length){var s=!1,d=o>=t;if(s||d){PostFeed.isLoading=!0;var i=e.find(".feed_list");if(s){i=i.first();var a=i.attr("prev_url"),r=i.attr("prev_ajax");a?PostFeed.LoadMore(a,r,"prev",!0):PostFeed.isLoading=!1}else{i=i.last();var n=i.attr("next_url"),l=i.attr("next_ajax");n?PostFeed.LoadMore(n,l,"next",!0):PostFeed.isLoading=!1}}}}},PostFeed.LoadMore=function(e,o,t,s){PostFeed._loader.show(),$(".more_posts").hide();$.ajax({type:"GET",url:o,data:{scroll:t},dataType:"script"}).done(function(){s&&history.pushState({id:e},"",e);var o=$(".feed_list"),d=o.last();if(o.each(function(e,o){$(o)[0]!=d[0]&&$(o).find(".more_posts").remove()}),"next"==t);else if("prev"==t){var i=o.first();s&&Scroll.AutoScrollTo($(i).height())}}).fail(function(){}).always(function(){PostFeed._loader.hide(),$(".more_posts").show(),PostFeed.isLoading=!1})};